<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Assistente de Código Python (IA)</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

</head>

<body>

  <div class="container">
    <!-- Area do Chat -->
    <div id="chat-container" class="chat-container"></div>

    <!-- Opcoes Modelo -->
    <div class="options-bar">
      <div class="model-selector">
        <span class="label">Modelo:</span>
        <select id="model-choice">
          <option value="gemini">Gemini</option>
          <option value="gpt">GPT</option>
          <option value="grok">Grok</option>
          <option value="claude">Claude</option>
        </select>
      </div>

      <!-- Botao Dark/Light mode-->
      <button id="theme-toggle" class="theme-toggle" title="Alternar tema">
        <svg class="icon sun" viewBox="0 0 24 24" width="18" height="18">
          <circle cx="12" cy="12" r="5" fill="currentColor" />
          <path
            d="M12 2v2m0 16v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M2 12h2m16 0h2M5.64 18.36l1.42-1.42M18.36 5.64l-1.42 1.42"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" />
        </svg>
        <svg class="icon moon" viewBox="0 0 24 24" width="18" height="18">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="currentColor" />
        </svg>
      </button>

      <button id="toggle-prompts" class="toggle-btn">
        Prompts Rápidos
        <i class="fa-solid fa-angle-up toggle-icon"></i>
      </button>
    </div>

    <!-- Caixa/Entrada para adicionar Prompt -->
    <div id="prompt-library" class="prompt-library collapsed">
      <div class="prompt-library-header">
        <input type="text" id="new-prompt-input" placeholder="Digite um novo prompt..." />
        <button id="add-prompt-direct" class="add-prompt-direct-btn">Adicionar</button>
      </div>
      <div class="prompt-list" id="prompt-list"></div>
    </div>

    <!-- Caixa/Entrada de Prompt para API -->
    <div class="input-area">
      <textarea id="prompt-input" placeholder="Digite sua pergunta sobre Python..." autocomplete="off"
        rows="1"></textarea>
      <button id="send-btn"><i class="fa-solid fa-paper-plane"></i></button>
    </div>
  </div>

  <!-- Templates -->
  <template id="message-template">
    <div class="message">
      <div class="user-label"></div>
      <div class="text"></div>
    </div>
  </template>

  <!-- Template do loading (estrutura da animacao de pensamento) -->
  <template id="loading-template">
    <div class="message bot">
      <div class="user-label" style="color: var(--primary);">Assistente</div>
      <div class="text loading-text">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>
    </div>
  </template>

  <!-- Bibliotecas -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <script>
    marked.setOptions({
      gfm: true,
      breaks: true,
      highlight: function (code, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(code, { language: lang }).value;
          } catch (_) { }
        }
        return hljs.highlightAuto(code).value;
      }
    });
    hljs.configure({ languages: ['python', 'javascript', 'bash', 'json', 'html', 'css'] });
  </script>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  <script>
    const INITIAL_PROMPTS = {{ initial_prompts | tojson }};
  </script>
</body>

</html>